Region=="Metropolitana",
Comuna=="Buin")
filter(datos,
Region=="Metropolitana",
Comuna=="Buin") %>%
rowSums(datos$Casos.confirmados)
filter(datos,
Region=="Metropolitana",
Comuna=="Buin") %>%
rowSums(Casos.confirmados)
filter(datos,
Region=="Metropolitana",
Comuna=="Buin") %>%
rowSums(datos$Casos.confirmados)
filter(datos,
Region=="Metropolitana",
Comuna=="Buin") %>%
colSums(datos$Casos.confirmados)
filter(datos,
Region=="Metropolitana",
Comuna=="Buin") %>%
colSums(datos$Casos.confirmados, na.rm=TRUE)
filter(datos,
Region=="Metropolitana",
Comuna=="Buin")
filter(datos,
Region=="Metropolitana",
Comuna=="Buin") %>% Casos.confirmados
filter(datos,
Region=="Metropolitana",
Comuna=="Buin") %>% datos$Casos.confirmados
colSums(filter(datos,
Region=="Metropolitana",
Comuna=="Buin" ) )
colSums(filter(
datos,Comuna=="Buin" ) )
colSums(filter(
datos,Comuna=="Buin" )$casos.confirmados )
colSums(filter(
datos,Comuna=="Buin" ).casos.confirmados )
rowSums(popu) #suma las columnas
filter(datos,Comuna=="Buin")
arrange(datos)
arrange(datos, Casos.confirmados)
arrange(datos, desc(Casos.confirmados)) #ordena creciente
select(filter(datos,Comuna=="Buin"), Casos.confirmados )
select(datos,region:Poblacion)
select(datos,Region:Poblacion)
select(datos,-Region:Poblacion) #selecciona todas las columnas entre region y comuna
select(datos,-(Region:Poblacion)) #selecciona todas las columnas entre region y comuna
select(datos, Casos.confirmados,Poblacion, everything())
mutate(datos, porcentaje=Poblacion/Casos.confirmados)
summarise(datos, Casos.confirmados, na.rm=TRUE)
reframe(datos, Casos.confirmados, na.rm=TRUE)
library(tidyverse)
library(lubridate)
library(dplyr)
casos <- read.csv("https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto3/TotalesPorRegion_std.csv")
View(casos)
str(casos)
str(casos)
##transform(datos, Poblacion = as.numeric((as.factor(Poblacion))))
casos <- transform(casos, fecha=as.Date(fecha))
##transform(datos, Poblacion = as.numeric((as.factor(Poblacion))))
casos <- transform(casos, fecha=as.Date(casos$Fecha))
View(casos)
##transform(datos, Poblacion = as.numeric((as.factor(Poblacion))))
casos <- transform(casos, Fecha=as.Date(casos$Fecha))
casos <- read.csv("https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto3/TotalesPorRegion_std.csv")
View(casos)
##transform(datos, Poblacion = as.numeric((as.factor(Poblacion))))
casos <- transform(casos, Fecha=as.Date(casos$Fecha))
##transform(datos, Poblacion = as.numeric((as.factor(Poblacion))))
casos <- transform(casos, Fecha=as.Date(casos$Fecha, ,format="%Y/%m/%d"))
str(casos)
casos %>%
filter(Region != "Total", #tengo una region total que no quiero
Categoria == "Casos nuevos totales") %>% #solo quiero los casos nuevos
group_by(Anio= year(fecha)) %>% #agrupare por cada año, agrupando por años iguales
summarise(Total_nuevos = sum(Total, na.omit=TRUE))#ahora que tengo todos los datos nuevos por año, los sumare para tener el total por año
casos %>%
filter(Region != "Total", #tengo una region total que no quiero
Categoria == "Casos nuevos totales") %>% #solo quiero los casos nuevos
group_by(Anio= year(fecha)) %>% #agrupare por cada año, agrupando por años iguales
summarise(Total_nuevos = sum(Total, na.omit=TRUE))#ahora que tengo todos los datos nuevos por año, los sumare para tener el total por año
filter(casos$Region != "Total", #tengo una region total que no quiero
Categoria == "Casos nuevos totales")
filter(casos$Region != "Total", #tengo una region total que no quiero
casos$Categoria == "Casos nuevos totales")
unique(casos$Categoria)
filter(casos$Region != "Total", #tengo una region total que no quiero
casos$Categoria == "Casos nuevos totales")
filter(casos$Region != "Total", #tengo una region total que no quiero
casos$Categoria == "Casos nuevos totales")%>%
group_by(Anio= year(fecha))
library(tidyverse)
library(lubridate)
library(dplyr)
casos <- read.csv("https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto3/TotalesPorRegion_std.csv")
casos <- transform(casos, Fecha=as.Date(casos$Fecha, ,format="%Y/%m/%d")) #transforme el char a fecha
str(casos)
casos <- transform(casos, Fecha=as.Date(casos$Fecha, ,format="%Y/%m/%d")) #transforme el char a fecha
str(casos)
View(casos)
casos <- transform(casos, Fecha=as.Date(casos$Fecha,format="%Y/%m/%d")) #transforme el char a fecha
str(casos)
casos <- read.csv("https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto3/TotalesPorRegion_std.csv")
str(casos)
casos <- transform(casos, Fecha=as.Date(casos$Fecha,format="%Y/%m/%d")) #transforme el char a fecha
str(casos)
str(casos)
filter(casos$Region != "Total", #tengo una region total que no quiero
casos$Categoria == "Casos nuevos totales")%>%
group_by(Anio= year(fecha))
filter(casos$Region != "Total", #tengo una region total que no quiero
casos$Categoria == "Casos nuevos totales")
casos <- transform(casos, Fecha=as.Date(casos$Fecha,format="%Y/%m/%d")) #transforme el char a fecha
str(casos)
library(tidyverse)
library(lubridate)
library(dplyr)
casos <- read.csv("https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto3/TotalesPorRegion_std.csv")
str(casos)
casos <- transform(casos, Fecha=as.Date(casos$Fecha,format="%Y/%m/%d")) #transforme el char a fecha
str(casos)
casos <- transform(casos, Fecha=as.Date(casos$Fecha)) #transforme el char a fecha
str(casos)
str(casos)
unique(casos$Region) #me muestra los valores unicos (cuales regiones tengo)
filter(casos$Region != "Total", #tengo una region total que no quiero
casos$Categoria == "Casos nuevos totales")
filter(casos$Region != "Total", #tengo una region total que no quiero
)
filter(casos$Region != "Total" #tengo una region total que no quiero
)
casos %>%
filter(Region != "Total", #tengo una region total que no quiero
Categoria == "Casos nuevos totales") %>% #solo quiero los casos nuevos
group_by(Anio= year(fecha)) %>% #agrupare por cada año, agrupando por años iguales
summarise(Total_nuevos = sum(Total, na.omit=TRUE))#ahora que tengo todos los datos nuevos por año, los sumare para tener el total por año
casos %>%
filter(Region != "Total", #tengo una region total que no quiero
Categoria == "Casos nuevos totales") %>% #solo quiero los casos nuevos
group_by(Anio= year(Fecha)) %>% #agrupare por cada año, agrupando por años iguales
summarise(Total_nuevos = sum(Total, na.omit=TRUE))#ahora que tengo todos los datos nuevos por año, los sumare para tener el total por año
str(casos)
casos <- read.csv("https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto3/TotalesPorRegion_std.csv")
casos <- transform(casos, Fecha=as.Date(casos$Fecha,format="%Y/%m/%d")) #transforme el char a fecha
casos <- read.csv("https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto3/TotalesPorRegion_std.csv")
library(lubridate)
casos <- transform(casos, Fecha=as.Date(casos$Fecha,format="%Y/%m/%d")) #transforme el char a fecha
casos <- read.csv("https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto3/TotalesPorRegion_std.csv")
casos <- transform(casos, Fecha=as.Date(casos$Fecha,format="%y/%d/%b")) #transforme el char a fecha
str(casos)
casos <- transform(casos, Fecha=as.Date(casos$Fecha,format="%Y/%m/%d")) #transforme el char a fecha
str(casos)
casos <- read.csv("https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto3/TotalesPorRegion_std.csv")
str(casos)
casos <- transform(casos, Fecha=as.Date(casos$Fecha,format="%Y/%m/%d")) #transforme el char a fecha
str(casos)
library(tidyverse)
library(lubridate)
library(lubridate)
library(dplyr)
casos <- read.csv("https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto3/TotalesPorRegion_std.csv")
str(casos)
casos <- transform(casos, Fecha=as.Date(casos$Fecha,format="%Y-%m-%d")) #transforme el char a fecha
str(casos)
casos %>%
filter(Region != "Total", #tengo una region total que no quiero
Categoria == "Casos nuevos totales") %>% #solo quiero los casos nuevos
group_by(Anio= year(Fecha)) %>% #agrupare por cada año, agrupando por años iguales
summarise(Total_nuevos = sum(Total, na.omit=TRUE))#ahora que tengo todos los datos nuevos por año, los sumare para tener el total por año
casos %>%
filter(Region != "Total", #tengo una region total que no quiero
Categoria == "Casos nuevos totales") %>% #solo quiero los casos nuevos
group_by(Anio= year(Fecha)) %>% #agrupare por cada año, agrupando por años iguales
casos %>%
filter(Region != "Total", #tengo una region total que no quiero
Categoria == "Casos nuevos totales") %>% #solo quiero los casos nuevos
group_by(Anio= year(Fecha))) %>% #agrupare por cada año, agrupando por años iguales
casos %>%
filter(Region != "Total", #tengo una region total que no quiero
Categoria == "Casos nuevos totales") %>% #solo quiero los casos nuevos
group_by(Anio= year(Fecha)) #%>% #agrupare por cada año, agrupando por años iguales
casos %>%
filter(Region != "Total", #tengo una region total que no quiero
Categoria == "Casos nuevos totales") %>% #solo quiero los casos nuevos
group_by(Anio= year(Fecha)) %>% #agrupare por cada año, agrupando por años iguales
summarise(Total_nuevos = sum(Total, na.omit=TRUE))#ahora que tengo todos los datos nuevos por año, los sumare para tener el total por año
resumen_chile <- casos %>%
filter(Region != "Total", #tengo una region total que no quiero
Categoria == "Casos nuevos totales") %>% #solo quiero los casos nuevos
group_by(Region, Anio= year(Fecha), Mes = month(Fecha)) %>% #agrupare por cada año, agrupando por años iguales
summarise(Total_nuevos = sum(Total, na.omit=TRUE))#ahora que tengo todos los datos nuevos por año, los sumare para tener el total por año
View(resumen_chile)
casos %>%
filter(Categoria == "Casos nuevos totales") %>%
group_by(Semana= week(Fecha)) %>% #agrupare por cada año, agrupando por años iguales
summarise(Total = sum(Total)) %>%
mutate(Var= (Total/ lag(Total)-1)*100) %>%
filter(Semana != 53) %>%
ggplot(aes(Semana,Var))+
geom_line()+
casos %>%
filter(Categoria == "Casos nuevos totales") %>%
group_by(Semana= week(Fecha)) %>% #agrupare por cada año, agrupando por años iguales
summarise(Total = sum(Total)) %>%
mutate(Var= (Total/ lag(Total)-1)*100) %>%
filter(Semana != 53) %>%
ggplot(aes(Semana,Var))+
geom_line()+
geom_smooth()
casos %>%
filter(Categoria == "Casos nuevos totales") %>%
group_by(Semana= week(Fecha)) %>% #agrupare por cada año, agrupando por años iguales
summarise(Total = sum(Total)) %>%
mutate(Var= (Total/ lag(Total)-1)*100) %>%
filter(Semana != 53) %>%
ggplot(aes(Semana,Var))+
geom_line()+
geom_smooth()
casos %>%
filter(Categoria == "Casos nuevos totales") %>%
group_by(Semana= week(Fecha)) %>% #agrupare por cada año, agrupando por años iguales
casos %>%
filter(Categoria == "Casos nuevos totales") %>%
group_by(Semana= week(Fecha))
casos %>%
filter(Categoria == "Casos nuevos totales") %>%
group_by(Semana= week(Fecha))
?lag
library(tidyverse)
#limpieza de dato ----------
table
#limpieza de dato ----------
tablea4
#limpieza de dato ----------
table4a
tablacasos <- table4a %>%
gather( '1999', '2000', key="año", value="cases") #unir dos variables en una sola columna
tablacasos
table4b
tablapoblacion <- table4b %>%
gather( '1999', '2000', key="año", value="population") #unir dos variables en una sola columna
tablapoblacion
#vamos a combinar las dos tablas para tener poblacion casos por años
nuevatabla <- left_join(tablacasos, tablapoblacion)
nuevatabla
library(tidyverse)
install.packages("datos")
library(datos)
library(ggplot2)
ggplot(data = diamantes)+
geom_bar(mapping = aes(x=corte))
diamantes %>%
count(corte)
ggplot(data = diamantes)+
geom_histogram(mapping = aes(x=quilate), binwidth = 0.5)
library(ggplot2)
library(datos)
library(tidyverse)
ggplot(data = diamantes)+
geom_histogram(mapping = aes(x=quilate), binwidth = 0.5)
diamantes %>%
count(cut_width(quilate, 0.5))
pequenos <- diamantes %>%
filter(quilate<3)
pequenos
ggplot(data= pequenos, mapping = aes(x=quilate))+
geom_histogram(binwidth = 0.1)
ggplot(data= pequenos, mapping = aes(x=quilate))+
geom_freqpoly(binwidth = 0.1)
ggplot(data= pequenos, mapping = aes(x=quilate, colour = corte))+
geom_freqpoly(binwidth = 0.1)
fiel
ggplot(data = fiel, mapping = aes(x=erupciones))+
geom_histogram(binwidth = 0.25)
ggplot(data = diamantes)+ #aca buscamos valores inusuales
geom_histogram(mapping = aes(x=y), binwidth = 0.5)+
coord_cartesian(ylim = c(0,50))
inusual <- diamantes %>%
filter(y < 3 | y > 20) %>%
select(precio,x,y,z) %>%
arrange(y)
inusual
#opcion 2 reemplazar valores inusuales con valores faltantes
diamantes2 <- diamantes %>%
mutate(y=ifelse(y < 3 | y > 20, NA, y))
ggplot(data=diamantes2, mapping = aes(x=x,y=y))+
geom_point()
library(datos)
library(ggplot2)
ggplot(data=diamantes2, mapping = aes(x=x,y=y))+
geom_point(na.rm = TRUE) #ignora los NA
ggplot(data= diamantes, mapping = aes(x = precio))+
geom_freqpoly(mapping = aes(colour = corte), binwidth = 500)
ggplot(diamantes)+
geom_bar(mapping = aes(x = corte))
ggplot(data= diamantes, mapping = aes(x = corte, y = precio))+
geom_boxplot()
ggplot(data= millas, mapping = aes(x = clase, y = autopista))+
geom_boxplot()
ggplot(data= millas)+
geom_boxplot(mapping = aes(x=reorder(clase, autopista, FUN = )))
ggplot(data= millas)+
geom_boxplot(mapping = aes(x=reorder(clase, autopista, FUN = median ), y= autopista ))
ggplot(data= millas)+
geom_boxplot(mapping = aes(x=reorder(clase, autopista, FUN = median ), y= autopista ))+
coord_flip()
#dos variables categoricas
ggplot(data = diamantes)+
geom_count(mapping = aes(x = corte, y = color))
diamantes %>%
count(color, corte)
library(tidyverse)
library(datos)
library(ggplot2)
diamantes %>%
count(color, corte)
diamantes %>%
count(color, corte) %>%
ggplot(mapping = aes(x = color, y = corte))+
geom_tile(mapping = aes(fill = n))
ggplot(data = diamantes)+
geom_point(mapping = aes(x = quilate, y = precio), alpha = 1/100)
ggplot(data = diamantes)+
geom_point(mapping = aes(x = quilate, y = precio))
ggplot(data = pequenos)+
geom_bin2d(mapping = aes(x= quilate, y = precio))
install.packages("hexbin")
library(hexbin)
ggplot(data = pequenos)+
geom_hex(mapping = aes(x= quilate, y = precio))
library(readxl)
library(lubridate)
#metricas
library(tidyverse)
install.packages(Rmisc)
install.packages("Rmisc")
library(Rmisc)
atenciones <- read_excel("data/AtencionesUrgencias.xlsx")
#leer excel
poblacion_comunas2 <- read_excel("data/poblacion_comunas2.xlsx", skip=6,sheet=1 )
atenciones <- read_excel("data/AtencionesUrgencias.xlsx")
atenciones <- read_excel("data/AtencionesUrgencia.xlsx")
View(atenciones)
respiratorias <- atenciones %>%
slice(4:11)
respiratorias <- respiratorias %>%
rename(tipo = "Tipo de atencion") %>%
mutate(tipo = str_remove(tipo, patten = " \\(([^\\)]+)\\)"))
respiratorias <- respiratorias %>%
rename(tipo = "Total de atenciones de urgencias") %>%
mutate(tipo = str_remove(tipo, patten = " \\(([^\\)]+)\\)"))
respiratorias <- respiratorias %>%
rename(tipo = "Total de atenciones de urgencia") %>%
mutate(tipo = str_remove(tipo, patten = " \\(([^\\)]+)\\)"))
respiratorias <- respiratorias %>%
rename(tipo = "Total de atenciones de urgencia") %>%
mutate(tipo = str_remove(tipo, patten = " \\(([^\\)]+)\\)"))
View(respiratorias)
respiratorias <- atenciones %>%
slice(4:11)
respiratorias <- respiratorias %>%
rename(tipo = "Total de atenciones de urgencia") %>%
mutate(tipo = str_remove(tipo, patten = " \\(([^\\)]+)\\)"))
atenciones <- read_excel("data/AtencionesUrgencia.xlsx")
View(atenciones)
respiratorias <- atenciones %>%
slice(4:11)
respiratorias <- respiratorias %>%
rename(tipo = "tipo") %>%
mutate(tipo = str_remove(tipo, patten = " \\(([^\\)]+)\\)"))
respiratorias <- respiratorias %>%
mutate(tipo = str_remove(tipo, patten = " \\(([^\\)]+)\\)"))
respiratorias <- respiratorias %>%
mutate(tipo = str_remove(tipo, pattern = " \\(([^\\)]+)\\)"))
respiratorias_long <- respiratorias %>%
pivot_longer(cols =-tipo,
names_to = "fecha",
values_to =  "n")
View(respiratorias_long)
respiratorias_long <- respiratorias_long %>%
mutate(tipo = factor(tipo),
fecha = ymd(fecha))
respiratorias_long <- respiratorias_long %>%
mutate(tipo = factor(tipo),
fecha = ymd(fecha))
#metricas
library(tidyverse)
library(lubridate)
library(readxl)
library(Rmisc)
respiratorias_long <- respiratorias_long %>%
mutate(tipo = factor(tipo),
fecha = ymd(fecha))
respiratorias_long <- respiratorias_long %>%
mutate(tipo = factor(tipo),
fecha = as.Date(fecha))
View(respiratorias_long)
respiratorias_long <- respiratorias_long %>%
mutate(tipo = factor(tipo),
fecha = as.Date(fecha, format="%Y-%m-%d"))
glimpse(respiratorias_long)
respiratorias_long <- respiratorias_long %>%
mutate(tipo = factor(tipo),
fecha = ymd(fecha))
glimpse(respiratorias_long)
install.packages("dataexplorer")
install.packages("DataExplorer")
library(DataExplorer)
introduce(respiratorias_long)
plot_intro(respiratorias_long)
sum(respiratorias_long$n)
min(respiratorias_long$n)
max(respiratorias_long$n) #maximo numero de casos
respiratorias_long %>%
group_by(mes = month(fecha)) %>%
dplyr::summarise(total = sum(n),
min= min(n),
max= max(n),
IQR= IQR(n), #intervalo intercuartilico
mean= mean(n),
se= sd(n),
median = median(n),
q10= quantile(n, probs = 0.1),
q90= quantile(n, probs = 0.9),
upper_ci = CI(n, 0.95)[1],
lower_ci = CI(n, 0.95)[3]
)
respiratorias_long %>%
group_by(mes = month(fecha)) %>%
dplyr::summarise(total = sum(n),
min= min(n),
max= max(n),
IQR= IQR(n), #intervalo intercuartilico
#mucha dispersion de datos
mean= mean(n),
se= sd(n),
median = median(n),
q10= quantile(n, probs = 0.1),
q90= quantile(n, probs = 0.9),
upper_ci = CI(n, 0.95)[1], #intervalo de confianza
lower_ci = CI(n, 0.95)[3]  #intervalo donde se mueven el 95% de los datos
)
attach(respiratorias_long)
attach(respiratorias_long)
attach(respiratorias_long)
attach(respiratorias_long)
respiratorias_long %>%
group_by(mes = month(fecha)) %>%
dplyr::summarise(total = sum(n),
min= min(n),
max= max(n),
IQR= IQR(n), #intervalo intercuartilico
#mucha dispersion de datos
mean= mean(n),
se= sd(n),
median = median(n),
q10= quantile(n, probs = 0.1),
q90= quantile(n, probs = 0.9),
upper_ci = CI(n, 0.95)[1], #intervalo de confianza
lower_ci = CI(n, 0.95)[3]  #intervalo donde se mueven el 95% de los datos
)
respiratorias <- respiratorias %>%
mutate(tipo = str_remove(tipo, pattern = " \\(([^\\)]+)\\)"))
respiratorias_long <- respiratorias %>%
pivot_longer(cols =-tipo,
names_to = "fecha",
values_to =  "n")
respiratorias_long <- respiratorias_long %>%
mutate(tipo = factor(tipo),
fecha = ymd(fecha))
attach(respiratorias_long)
numero <-  cut(n,breaks = nclass.Sturges(n))
freq <- as.data.frame(table(numero))
tabla <- transform(freq, cum_freq = cumsum(freq),
rel = prop.table(freq), cum_rel = cumsum(prop.table(freq)))
tabla <- transform(freq, cum_freq = cumsum(freq),
rel = prop.table(freq), cum_rel = cumsum(prop.table(freq)))
numero <-  cut(n,breaks = nclass.Sturges(n))
Freq <- as.data.frame(table(numero))
tabla <- transform(Freq, cum_freq = cumsum(Freq),
rel = prop.table(Freq), cum_rel = cumsum(prop.table(Freq)))
tabla
View(freq)
respiratorias_long %>%
ggplot(aes(n, tipo))+
geom_boxplot()
respiratorias_long %>%
ggplot(aes(n))+
geom_boxplot()
respiratorias_long %>%
ggplot(aes(n))+
geom_histogram()+
facet_wrap(¬ tipo)
respiratorias_long %>%
ggplot(aes(n))+
geom_histogram()+
facet_wrap(- tipo)
respiratorias_long %>%
ggplot(aes(n))+
geom_histogram()+
facet_wrap(∼ tipo)
respiratorias_long %>%
ggplot(aes(n))+
geom_histogram()+
facet_wrap( tipo)
respiratorias_long %>%
ggplot(aes(fecha, n, color= tipo))+
geom_smooth(se=FALSE)
